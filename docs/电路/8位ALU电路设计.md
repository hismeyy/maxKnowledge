---
title: 8位ALU电路设计
sidebar: heading
---

# 8位ALU电路设计

> [ALU电路下载](https://github.com/hismeyy/circuit/blob/main/ALU.circ)
>
> 电路中实现了：8位右移位器、8位左移位器、8位与门、8位或门、8位非门、半加器、全加器、8位全加器、比较器、8位比较器、38译码器、判0和ALU

## 简介

这篇文章主要内容是，手搓一个简单的8位ALU，支持的功能如下：

| 汇编  | 操作码 | 含义    |
|-----|-----|-------|
| CMP | 000 | 比较A和B |
| AND | 001 | 按位与   |
| OR  | 010 | 按位或   |
| NOT | 011 | 按位非   |
| SHR | 100 | 右移    |
| SHL | 101 | 左移    |
| ADD | 110 | 加法    |

需要构建每一个操作电路，然后通过38译码器来控制使用哪个电路来进行操作。基本的电路有：8位右移位器、8位左移位器、8位与门、8位或门、8位非门、8位全加器、8位比较器、38译码器、判0。

## 8位右移位器

实现右移的逻辑是，输入位1连接输出位0，以此类推，错开一位。

![image-20240707131255731](http://maximg.maxcosmos.top/blog-img/image-20240707131255731.png)

## 8位左移位器

实现左移的逻辑是，输入位0连接输出位1，以此类推，错开一位。

![image-20240707131427454](http://maximg.maxcosmos.top/blog-img/image-20240707131427454.png)

## 8位与门

通过与门实现。

![image-20240707131530909](http://maximg.maxcosmos.top/blog-img/image-20240707131530909.png)

## 8位或门

通过或门实现。

![image-20240707131550805](http://maximg.maxcosmos.top/blog-img/image-20240707131550805.png)

## 8位非门

通过非门实现。

![image-20240707131607227](http://maximg.maxcosmos.top/blog-img/image-20240707131607227.png)

## 8位全加器

### 半加器

半加器可以实现，一位A和一位B相加得到S，并且可以得到进位C。真值表为：

| A | B | C | S |
|---|---|---|---|
| 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 1 |
| 0 | 1 | 0 | 1 |
| 1 | 1 | 1 | 0 |

通过真值表我们可以发现，S的输出逻辑和异或门一样，而C的输出逻辑和与门一样，因此可以结合这两个门电路实现半加器。

![image-20240707131729991](http://maximg.maxcosmos.top/blog-img/image-20240707131729991.png)

### 全加器

全加器可以实现，一位A和一位B以及一位CIN相加得到S，并且可以得到进位COUT。真值表为：

| A | B | CIN | COUT | S |
|---|---|-----|------|---|
| 0 | 0 | 0   | 0    | 0 |
| 1 | 0 | 0   | 0    | 1 |
| 0 | 1 | 0   | 0    | 1 |
| 0 | 0 | 1   | 0    | 1 |
| 1 | 1 | 0   | 1    | 0 |
| 1 | 1 | 1   | 1    | 1 |

首先需要思考的是，什么决定S的值，那肯定是A、B、CIN。而通过半加器可以知道，两位相加可以通过一个异或门实现，因此我们可以先求A、B，得到一个临时的
TEMPS，再和 CIN 相加。所以这里需要两个异或门。

接着我们需要考虑 COUT，那什么决定 COUT 呢？很明显，一个是A、B相加可能会进位的 TEMPC1，而 TEMPS 和 CIN 相加可能会进位的
TEMPC2。根据半加器可以知道，进位需要的是与门，因此这里需要两个与门。

那最后的 COUT 就会转换成由 TEMPC1 和 TEMPC2 决定。我们写一下他的真值表：

| TEMPC1 | TEMPC2 | COUT |
|--------|--------|------|
| 0      | 0      | 0    |
| 1      | 0      | 1    |
| 0      | 1      | 1    |

可以发现，COUT的输出与或门一样，因此我们这里需要一个或门。

总结：需要 2 个 异或门、2 个 与门、1 个 或门，就可以实现全加器。

![image-20240707133312003](http://maximg.maxcosmos.top/blog-img/image-20240707133312003.png)

### 8位全加器

由八个全加器组合而成。

![image-20240707131705563](http://maximg.maxcosmos.top/blog-img/image-20240707131705563.png)

## 8位比较器

### 比较器

我们观察基本门电路中的异或门，发现相同为 0，不同为 1。刚好就可以用来比较。而我们的比较器需要实现的功能是：比较是否相同和比较大小。

首先我们连接A、B到异或门，异或门输出的结果：不同为高电平，相同为低电平，命名该路线为UNEQUAL，可以比较 AB 是否不同。

为了实现多位的比较，我们需要在异或门输出的结果上拉出一路命名为 EQUAL，为了实现 相同输出高电平，不同输出低电平，因此我们在这一路加一个非门。

UNEQUAL 和 EQUAL 是所有结果的集合。当前位需要与上一位的结果进行判断，真值表为：

| 当前位 | 上一位的比较结果 | 结果 |
|-----|----------|----|
| 0   | 0        | 0  |
| 1   | 0        | 0  |
| 0   | 1        | 0  |
| 1   | 1        | 1  |

这个真值表很明显是一个与门。因此，我们需要一个与门就可以判断当前位和上一位是否都相同。相同输出高电平，不同输出低电平。

下面我们实现比较大小。我们先规定，A大输出高电平，A小或者相等输出低电平。为了实现多位的比较，我们也需要接受上一位的结果。如果上一位是高电平，那么肯定A就是大的值了。所以输出应该一直为高电平。这一看就是一个或门，有
1 则 1， 全 0 则 0。所以这里需要有一个或门。

其中一个引脚接受上一位比较的结果。而另一个引脚接受当前位的结果。

首先，我们需要考虑，什么情况下才会进行比较？首先肯定是 UNEQUAL
的结果，如果它是高电平才需要比较。第二个则是上一位是否相同的结果，如果它是高电平，说明上一位相同，当前位就需要比较。还有一个需要考虑的就是
A 本身。如果 A 是 0，那 A 肯定比 B 小 或者 和 B 相同。因此，只有这三个同时满足的情况下，才会进行比较。很明显需要一个与门就可以实现。

下面将我们的分析进行连接得到电路：

![image-20240707140039437](http://maximg.maxcosmos.top/blog-img/image-20240707140039437.png)

### 8位比较器

上面，我们做的比较器，只能比较一位。接下来，我们需要用八个比较器来实现8位比较器。连接电路图如下：

![image-20240707141229175](http://maximg.maxcosmos.top/blog-img/image-20240707141229175.png)

> 这里需要注意的是，我们比较是从高位到低位比较。第一个比较器，接受上一位是否相同的引进应该默认为 1。接受上一位是否不同的引脚应该默认为
> 0。

## 38译码器

38译码器是为了将 3位 2进制的数转换成 8位。真值表为：

| A2 | A1 | A0 | Y7 | Y6 | Y5 | Y4 | Y3 | Y2 | Y1 | Y0 |
|----|----|----|----|----|----|----|----|----|----|----|
| 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 1  |
| 0  | 0  | 1  | 0  | 0  | 0  | 0  | 0  | 0  | 1  | 0  |
| 0  | 1  | 0  | 0  | 0  | 0  | 0  | 0  | 1  | 0  | 0  |
| 0  | 1  | 1  | 0  | 0  | 0  | 0  | 1  | 0  | 0  | 0  |
| 1  | 0  | 0  | 0  | 0  | 0  | 1  | 0  | 0  | 0  | 0  |
| 1  | 0  | 1  | 0  | 0  | 1  | 0  | 0  | 0  | 0  | 0  |
| 1  | 1  | 0  | 0  | 1  | 0  | 0  | 0  | 0  | 0  | 0  |
| 1  | 1  | 1  | 1  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |

这个连接思路是，对A0，A1，A2，的输出取反，然后连接与门。下面是实现的电路。

![image-20240707141652454](http://maximg.maxcosmos.top/blog-img/image-20240707141652454.png)

## 判0

这个电路，只需要一个或非门就可以实现，如果是全是 0，输出 1。只要有一个 1，输出 0。

![image-20240707142338636](http://maximg.maxcosmos.top/blog-img/image-20240707142338636.png)

## 组合ALU

接下来，我们根据简介中的支持功能汇编指令来实现电路逻辑。如下：

![image-20240707142500193](http://maximg.maxcosmos.top/blog-img/image-20240707142500193.png)

> 值得注意的是：我们需要使用三态门，来实现译码器控制某个功能电路。

这样我们的8为ALU，就实现啦！！！！
